{"ast":null,"code":"import React,{useState}from\"react\";import{Button,Form,Spinner}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{ToastContainer}from\"react-toastify\";import{SendOtp,VerifyOtp}from\"../../../features/apiCall\";import BootstrapModal from\"../../layout/Components/BootstrapModal\";import AuthLayout from\"../AuthLayout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{const[showModal,setShowModal]=useState(false);const[email,setEmail]=useState(\"\");const dispatch=useDispatch();const{isFetching}=useSelector(state=>state.auth);const handleSendOtp=async()=>{if(await SendOtp(dispatch,{email})){setShowModal(true);}};const handleClose=()=>setShowModal(false);return/*#__PURE__*/_jsxs(AuthLayout,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"forgot-password\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4 font-weight-bold\",children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1 mt-4 email ml-1\",children:\"Email to send reset instructions to\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Email\",onChange:e=>setEmail(e.target.value),value:email,className:\"mb-3 \"}),isFetching?/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"purple-button w-100\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"light\"})}):/*#__PURE__*/_jsx(Button,{className:\"purple-button w-100\",onClick:handleSendOtp,children:\"Next\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"illustration-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"images/ForgotPassword.png\",className:\"illustration\",style:{width:\"300px\",height:\"auto\"}})}),email.length>0&&/*#__PURE__*/_jsx(BootstrapModal,{showModal:showModal,handleClose:handleClose,modalTitle:\"\",modalContent:/*#__PURE__*/_jsx(ModalContent,{email:email})// className=\"check_your_modal_container\"\n}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\"})]});};export default ForgotPassword;const ModalContent=_ref=>{let{email}=_ref;const[otp,setOtp]=useState([\"\",\"\",\"\",\"\",\"\",\"\"]);const navigate=useNavigate();const dispatch=useDispatch();const handleOtpChange=(index,value)=>{const newOtp=[...otp];newOtp[index]=value;setOtp(newOtp);if(value&&index<5){document.getElementById(\"otp-input-\".concat(index+1)).focus();}if(newOtp.every(code=>code!==\"\")){sendOtpRequest(newOtp.join(\"\"));}};const sendOtpRequest=async otpValue=>{if(email){try{if(await VerifyOtp(dispatch,{email:email,code:otpValue})){navigate(\"/update-password\",{state:email});}}catch(error){// Handle any errors that might occur during the OTP verification\nconsole.error(\"Error during OTP verification:\",error);}}};return/*#__PURE__*/_jsxs(\"section\",{className:\"check-your-inbox\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-envelope\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex check-your-box-texts\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Check Your Inbox\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Please open the link in the email to continue \",/*#__PURE__*/_jsx(\"br\",{}),\"or Enter the verification code we sent to\",\" \"]}),/*#__PURE__*/_jsx(\"h6\",{children:email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"otp-input-container\",children:otp.map((digit,index)=>/*#__PURE__*/_jsx(\"input\",{id:\"otp-input-\".concat(index),type:\"text\",maxLength:\"1\",value:digit,onChange:e=>handleOtpChange(index,e.target.value),className:\"otp-input m-3\"},index))}),/*#__PURE__*/_jsx(\"p\",{children:\"Resend (60s)\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"12px\"},children:\"Need Help ?\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"purple-button w-50\",style:{zIndex:\"-2\"},children:[\"Update Password\",\" \"]})]});};","map":{"version":3,"names":["React","useState","Button","Form","Spinner","useDispatch","useSelector","useNavigate","ToastContainer","SendOtp","VerifyOtp","BootstrapModal","AuthLayout","jsx","_jsx","jsxs","_jsxs","ForgotPassword","showModal","setShowModal","email","setEmail","dispatch","isFetching","state","auth","handleSendOtp","handleClose","children","className","Control","type","name","placeholder","onChange","e","target","value","animation","variant","onClick","src","style","width","height","length","modalTitle","modalContent","ModalContent","position","_ref","otp","setOtp","navigate","handleOtpChange","index","newOtp","document","getElementById","concat","focus","every","code","sendOtpRequest","join","otpValue","error","console","map","digit","id","maxLength","fontSize","zIndex"],"sources":["/Users/charupatelbaghi/ares-elite/src/components/auth/password/forgotPassword.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Form, Spinner } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport { SendOtp, VerifyOtp } from \"../../../features/apiCall\";\nimport BootstrapModal from \"../../layout/Components/BootstrapModal\";\nimport AuthLayout from \"../AuthLayout\";\n\nconst ForgotPassword = () => {\n  const [showModal, setShowModal] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const dispatch = useDispatch();\n  const { isFetching } = useSelector((state) => state.auth);\n  const handleSendOtp = async () => {\n    if (await SendOtp(dispatch, { email })) {\n      setShowModal(true);\n    }\n  };\n  const handleClose = () => setShowModal(false);\n\n  return (\n    <AuthLayout>\n      <section className=\"forgot-password\">\n        <h3 className=\"mb-4 font-weight-bold\">Forgot Password</h3>\n        <p className=\"mb-1 mt-4 email ml-1\">\n          Email to send reset instructions to\n        </p>\n        <Form.Control\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          onChange={(e) => setEmail(e.target.value)}\n          value={email}\n          className=\"mb-3 \"\n        />\n        {isFetching ? (\n          <Button type=\"submit\" className=\"purple-button w-100\">\n            <Spinner animation=\"border\" variant=\"light\" />\n          </Button>\n        ) : (\n          <Button className=\"purple-button w-100\" onClick={handleSendOtp}>\n            Next\n          </Button>\n        )}\n      </section>\n      <section className=\"illustration-container\">\n        <img\n          src=\"images/ForgotPassword.png\"\n          className=\"illustration\"\n          style={{ width: \"300px\", height: \"auto\" }}\n        />\n      </section>\n      {email.length > 0 && (\n        <BootstrapModal\n          showModal={showModal}\n          handleClose={handleClose}\n          modalTitle={\"\"}\n          modalContent={<ModalContent email={email} />}\n          // className=\"check_your_modal_container\"\n        />\n      )}\n\n      <ToastContainer position=\"top-center\" />\n    </AuthLayout>\n  );\n};\n\nexport default ForgotPassword;\n\nconst ModalContent = ({ email }) => {\n  const [otp, setOtp] = useState([\"\", \"\", \"\", \"\", \"\", \"\"]);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const handleOtpChange = (index, value) => {\n    const newOtp = [...otp];\n    newOtp[index] = value;\n    setOtp(newOtp);\n\n    if (value && index < 5) {\n      document.getElementById(`otp-input-${index + 1}`).focus();\n    }\n    if (newOtp.every((code) => code !== \"\")) {\n      sendOtpRequest(newOtp.join(\"\"));\n    }\n  };\n  const sendOtpRequest = async (otpValue) => {\n    if (email) {\n      try {\n        if (await VerifyOtp(dispatch, { email: email, code: otpValue })) {\n          navigate(\"/update-password\", { state: email });\n        }\n      } catch (error) {\n        // Handle any errors that might occur during the OTP verification\n        console.error(\"Error during OTP verification:\", error);\n      }\n    }\n  };\n  return (\n    <section className=\"check-your-inbox\">\n      <i className=\"fa fa-envelope\" aria-hidden=\"true\" />\n      <div className=\"d-flex check-your-box-texts\">\n        <h5>Check Your Inbox</h5>\n        <p>\n          Please open the link in the email to continue <br />\n          or Enter the verification code we sent to{\" \"}\n        </p>\n        <h6>{email}</h6>\n      </div>\n\n      {/* <Form.Control /> */}\n      <div className=\"otp-input-container\">\n        {otp.map((digit, index) => (\n          <input\n            key={index}\n            id={`otp-input-${index}`}\n            type=\"text\"\n            maxLength=\"1\"\n            value={digit}\n            onChange={(e) => handleOtpChange(index, e.target.value)}\n            className=\"otp-input m-3\"\n          />\n        ))}\n      </div>\n      <p>Resend (60s)</p>\n      <p style={{ fontSize: \"12px\" }}>Need Help ?</p>\n      <button\n        type=\"submit\"\n        className=\"purple-button w-50\"\n        style={{ zIndex: \"-2\" }}\n      >\n        Update Password{\" \"}\n      </button>\n    </section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}