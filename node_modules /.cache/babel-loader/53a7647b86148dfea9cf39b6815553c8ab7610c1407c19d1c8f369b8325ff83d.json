{"ast":null,"code":"import{jwtDecode as jwt_decode}from\"jwt-decode\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Navigate,Outlet,useNavigate}from\"react-router-dom\";import{logOut}from\"../features/authSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=()=>{const{isFetching,token}=useSelector(state=>state.auth);const dispatch=useDispatch();const navigate=useNavigate();useEffect(()=>{const checkToken=async()=>{if(token){const decodedToken=jwt_decode(token);if(decodedToken.exp<Date.now()/1000){dispatch(logOut());navigate(\"/\");}}else{navigate(\"/\");}};checkToken();},[token,navigate]);if(!token&&!isFetching){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(Outlet,{});};export default ProtectedRoute;","map":{"version":3,"names":["jwtDecode","jwt_decode","React","useEffect","useDispatch","useSelector","Navigate","Outlet","useNavigate","logOut","jsx","_jsx","ProtectedRoute","isFetching","token","state","auth","dispatch","navigate","checkToken","decodedToken","exp","Date","now","to"],"sources":["/Users/charupatelbaghi/ares-elite/src/utils/ProtectedRoute.js"],"sourcesContent":["import { jwtDecode as jwt_decode } from \"jwt-decode\";\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate, Outlet, useNavigate } from \"react-router-dom\";\nimport { logOut } from \"../features/authSlice\";\n\nconst ProtectedRoute = () => {\n  const { isFetching, token } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const checkToken = async () => {\n      if (token) {\n        const decodedToken = jwt_decode(token);\n        if (decodedToken.exp < Date.now() / 1000) {\n          dispatch(logOut());\n          navigate(\"/\");\n        }\n      } else {\n        navigate(\"/\");\n      }\n    };\n\n    checkToken();\n  }, [token, navigate]);\n\n  if (!token && !isFetching) {\n    return <Navigate to=\"/\" />;\n  }\n\n  return <Outlet />;\n};\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA,OAASA,SAAS,GAAI,CAAAC,UAAU,KAAQ,YAAY,CACpD,MAAO,CAAAC,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,CAAEC,MAAM,CAAEC,WAAW,KAAQ,kBAAkB,CAChE,OAASC,MAAM,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,UAAU,CAAEC,KAAM,CAAC,CAAGT,WAAW,CAAEU,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CAChE,KAAM,CAAAC,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAc,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9BL,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAIL,KAAK,CAAE,CACT,KAAM,CAAAM,YAAY,CAAGnB,UAAU,CAACa,KAAK,CAAC,CACtC,GAAIM,YAAY,CAACC,GAAG,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAE,CACxCN,QAAQ,CAACR,MAAM,CAAC,CAAC,CAAC,CAClBS,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,IAAM,CACLA,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAEDC,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACL,KAAK,CAAEI,QAAQ,CAAC,CAAC,CAErB,GAAI,CAACJ,KAAK,EAAI,CAACD,UAAU,CAAE,CACzB,mBAAOF,IAAA,CAACL,QAAQ,EAACkB,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CAEA,mBAAOb,IAAA,CAACJ,MAAM,GAAE,CAAC,CACnB,CAAC,CAED,cAAe,CAAAK,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}